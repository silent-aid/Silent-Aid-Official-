<script>
  // Initialize cart as empty or load from localStorage
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  // Toggle the cart modal visibility
  function toggleCart() {
    const cartModal = document.getElementById('cart-modal');
    cartModal.style.display = cartModal.style.display === 'flex' ? 'none' : 'flex';
    updateCart();
  }

  // Add items to the cart
  function addToCart(name, price) {
    const existing = cart.find(item => item.name === name);
    if (existing) {
      existing.qty++;
    } else {
      cart.push({ name, price, qty: 1 });
    }
    saveCart();
    updateCart();
  }

  // Remove items from the cart
  function removeFromCart(name) {
    cart = cart.filter(item => item.name !== name);
    saveCart();
    updateCart();
  }

  // Update the cart view and total
  function updateCart() {
    const cartItems = document.getElementById('cart-items');
    const cartCount = document.getElementById('cart-count');
    const cartTotal = document.getElementById('cart-total');
    cartItems.innerHTML = cart.map(item => `
      <div class="cart-item">
        <div>${item.name} (x${item.qty})</div>
        <div>$${(item.qty * item.price).toFixed(2)}</div>
        <button onclick="removeFromCart('${item.name}')">Remove</button>
      </div>
    `).join('');

    // Update total
    cartTotal.textContent = `Total: $${cart.reduce((total, item) => total + (item.price * item.qty), 0).toFixed(2)}`;
    // Update cart item count
    cartCount.textContent = cart.reduce((total, item) => total + item.qty, 0);
  }

  // Save the cart to localStorage
  function saveCart() {
    localStorage.setItem('cart', JSON.stringify(cart));
  }

  // âœ… Fixed: Proceed to checkout with redirection
  function checkout() {
    localStorage.removeItem('cart'); // Clear the cart
    window.location.href = 'thankyou.html'; // Redirect to thank you page
  }

  // Filter products based on category
  function filterProducts(category) {
    const products = document.querySelectorAll('.product');
    products.forEach(product => {
      if (category === 'all' || product.getAttribute('data-category') === category) {
        product.style.display = 'block';
      } else {
        product.style.display = 'none';
      }
    });
  }

  // Update cart on page load
  updateCart();
</script>
