<script>
  let cart = JSON.parse(localStorage.getItem('cart')) || [];

  function renderSummary() {
    const summaryItems = document.getElementById('summary-items');
    const summaryTotal = document.getElementById('summary-total');
    let total = 0;

    if (cart.length === 0) {
      summaryItems.innerHTML = `<p style="color: #ccc;">Your cart is empty.</p>`;
      summaryTotal.textContent = `Total: $0`;
      return;
    }

    summaryItems.innerHTML = cart.map(item => {
      const subtotal = item.price * item.qty;
      total += subtotal;
      return `
        <div class="summary-item">
          <div>${item.name} x${item.qty}</div>
          <div>$${subtotal.toFixed(2)}</div>
        </div>
      `;
    }).join('');

    summaryTotal.textContent = `Total: $${total.toFixed(2)}`;
  }

  function placeOrder() {
    if (cart.length === 0) {
      alert("Your cart is empty. Please add at least one item before placing an order.");
      return;
    }

    const name = document.querySelector('input[placeholder="Full Name"]').value.trim();
    const email = document.querySelector('input[placeholder="Email Address"]').value.trim();
    const address = document.querySelector('input[placeholder="Shipping Address"]').value.trim();
    const city = document.querySelector('input[placeholder="City"]').value.trim();
    const postal = document.querySelector('input[placeholder="Postal Code"]').value.trim();

    if (!name || !email || !address || !city || !postal) {
      alert("Please fill in all required shipping details.");
      return;
    }

    if (!email.endsWith('@gmail.com') || !/^[^\s@]+@gmail\.com$/.test(email)) {
      alert("Please enter a valid Gmail address.");
      return;
    }

    // Everything is valid
    alert('Order placed successfully! Thank you for supporting Gaza. ❤️');
    localStorage.removeItem('cart');
    window.location.href = 'thankyou.html'; // You can create a thank you page or redirect
  }

  renderSummary();
</script>
